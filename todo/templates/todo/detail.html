{% load static %}
<!DOCTYPE html>
<html lang="ja">

  <head>
    <title>To Do Application</title>
    <meta charset="UTF-8">
    <meta name="author" content="INIAD">
  </head>

  <body>
    <h1>{{ task.title }}</h1>
    <ul>
      <li>Posted at: {{ task.posted_at }}</li>
      {% if task.due_at %}
      <li>Due at: {{ task.due_at }}</li>
      {% endif %}
      {% if task.completed %}
      <li>Status: Completed</li>
      {% else %}
      <li>Status: Not Completed</li>
      {% endif %}
    </ul>

    <div>
      <a href="{% url 'index' %}">Top</a>
      | <a href="{ url 'delete' task.id %}">Delete</a>
      | <a href="{% url 'update' task.id %}">Edit</a>
    </div>

    <hr>

    <h2>Comments: コメント</h2>
    <ul>
    {% for comment in comments %}
      <li>
        <strong>{{ comment.author }}</strong>: {{ comment.content }}<br>
        <small>({{ comment.posted_at }})</small>
      </li>
    {% empty %}
      <li>No comments yet.</li>
    {% endfor %}
  </ul>

  <h3>Add a Comment</h3>
  <form method="post" action="{% url 'detail' task.id %}">
    {% csrf_token %}
    <input type="text" name="author" placeholder="Your name">
    <br>
    <textarea name="content" rows="3" cols="40" placeholder="Write your comment here..."></textarea>
    <br>
    <button type="submit">Post Comment</button>
  </form>
  </body>

</html>
